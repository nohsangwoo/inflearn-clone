<!DOCTYPE html>
<html>
<head>
    <title>Test Cached HLS Player</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-button {
            padding: 10px 20px;
            margin: 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .test-button:hover { background: #218838; }
        .highlight { background: #f8f9fa; padding: 15px; border-left: 4px solid #28a745; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 Cached HLS Player Test</h1>

        <div class="highlight">
            <strong>새로운 캐시 기반 플레이어 완성!</strong><br>
            TanStack Query를 사용하여 admin 페이지와 동일한 캐시된 DubTrack 데이터를 활용합니다.
        </div>

        <h2>✨ 주요 개선사항:</h2>
        <ul>
            <li>✅ <strong>TanStack Query 캐싱</strong>: admin 페이지와 동일한 쿼리 키 사용</li>
            <li>✅ <strong>DB 기반 언어 목록</strong>: master.m3u8 파일에 의존하지 않음</li>
            <li>✅ <strong>실시간 상태 반영</strong>: DubTrack의 status가 'ready'인 것만 표시</li>
            <li>✅ <strong>언어별 상태 표시</strong>: 각 언어의 처리 상태 확인 가능</li>
            <li>✅ <strong>안정적인 언어 전환</strong>: HLS.js와 DB 데이터 연동</li>
        </ul>

        <h2>🧪 테스트 방법:</h2>
        <ol>
            <li>아래 버튼으로 Admin 페이지 열기</li>
            <li>기존 "다국어 재생" 버튼과 비교</li>
            <li>새로운 "캐시된 다국어 재생" 버튼 클릭</li>
            <li>언어 전환 기능 테스트</li>
            <li>디버그 정보로 데이터 확인</li>
        </ol>

        <a href="/admin/courses/1" class="test-button" target="_blank">
            🎬 Admin 페이지에서 테스트하기
        </a>

        <h2>🔍 예상 결과:</h2>
        <ul>
            <li>Section 3: 일본어, 중국어, 영어, 프랑스어 4개 언어 표시</li>
            <li>각 언어 버튼에 상태 표시 (ready)</li>
            <li>언어 전환 시 즉시 반응</li>
            <li>캐시된 데이터 사용으로 빠른 로딩</li>
        </ul>

        <div class="highlight">
            <strong>💡 핵심 아이디어:</strong><br>
            master.m3u8 파일이 덮어써지는 문제와 상관없이,
            DB의 DubTrack 데이터를 직접 활용하여 안정적인 다국어 재생을 제공합니다!
        </div>

        <h2>📊 현재 구현 상태:</h2>
        <ul>
            <li>✅ CachedHlsPlayerModal 컴포넌트 완성</li>
            <li>✅ TanStack Query 연동</li>
            <li>✅ DubTrack 데이터 파싱</li>
            <li>✅ 언어 전환 로직</li>
            <li>🔄 Admin 페이지 통합 (수동 테스트 필요)</li>
        </ul>
    </div>
</body>
</html>